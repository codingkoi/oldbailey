// Generated by CoffeeScript 1.3.3
(function() {
  var OldBaileyModel, callback,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  OldBaileyModel = (function() {

    function OldBaileyModel(data) {
      this.selectCase = __bind(this.selectCase, this);

      this.update = __bind(this.update, this);
      this.results = ko.mapping.fromJS(data);
      this.curCase = ko.observable(this.results.Records()[0]);
    }

    OldBaileyModel.prototype.newSearch = function() {
      return $.get("/search?text=" + (this.results.SearchText()), this.update, "json");
    };

    OldBaileyModel.prototype.update = function(data) {
      return ko.mapping.fromJS(data, this.results);
    };

    OldBaileyModel.prototype.backToResults = function() {
      return this.curCase(null);
    };

    OldBaileyModel.prototype.selectCase = function(caseObj) {
      return this.curCase(caseObj);
    };

    return OldBaileyModel;

  })();

  callback = function(data) {
    window.oldBaileyModel = new OldBaileyModel(data);
    return ko.applyBindings(window.oldBaileyModel);
  };

  $.get("/search", callback, "json");

}).call(this);
